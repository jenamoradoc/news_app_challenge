import{j as e,u,R as p,r as o,N as w,S as x}from"./index-DfmWEoSy.js";import{F as j}from"./Footer-BPX_X8gL.js";import{F as f,I as g,s as N,M as y}from"./MainNews-fDzpwciL.js";const S=({handleSearchTermChange:r,handleSubmit:s,searchTerm:t})=>e.jsx("header",{className:"header",children:e.jsxs("form",{id:"search-form",onSubmit:s,children:[e.jsx("input",{type:"text",placeholder:"Search news...",value:t,onChange:r}),e.jsx("button",{type:"submit",children:e.jsx(f,{})})]})}),v=({article:{author:r,title:s,urlToImage:t,content:a},onClick:n})=>e.jsxs("li",{className:"news-list-item",onClick:n,children:[e.jsx(g,{src:t,alt:s}),e.jsx("div",{children:e.jsxs("p",{children:["Author: ",N(r)]})}),e.jsx("h5",{children:s}),e.jsx("p",{children:a??"(No content provided)"})]}),b=({articles:r})=>{const s=u(),t=r[0],a=r.slice(1),n=i=>{s(p.NewsItemPage,{state:{article:i}})};return e.jsxs("div",{className:"news-container animate__animated animate__fadeIn",children:[e.jsx("div",{onClick:()=>n(t),children:e.jsx(y,{firstArticle:t})}),e.jsx("ul",{className:"news-list",children:a.map(i=>e.jsx(v,{article:i,onClick:()=>n(i)},i.title))})]})};class A{constructor(s,t){this.baseUrl=s,this.apiKey=t}async getNews(){const s=`${this.baseUrl}/top-headlines?country=us&apiKey=${this.apiKey}`;return await(await fetch(s)).json()}async searchNews(s){const t=`${this.baseUrl}/everything?q=${s}&apiKey=${this.apiKey}`;return await(await fetch(t)).json()}}const d=new A("https://newsapi.org/v2","8ab9f6a80b5241b4ba7f0b3938ea683e"),T=()=>{const[r,s]=o.useState([]),[t,a]=o.useState(!1),[n,i]=o.useState("");return o.useEffect(()=>{a(!0),(async()=>{try{const h=(await d.getNews()).articles.filter(l=>l.title!=="[Removed]");s(h),setTimeout(()=>{a(!1)},1e3)}catch(c){console.error("Error loading news:",c),a(!1)}})()},[]),{articles:r,loading:t,searchTerm:n,handleNewsSearch:async c=>{c.preventDefault(),a(!0);const l=(await d.searchNews(n)).articles.filter(m=>m.title!=="[Removed]");s(l),a(!1)},handleSearchTermChange:c=>{i(c.target.value)}}},$=()=>{const{articles:r,loading:s,searchTerm:t,handleNewsSearch:a,handleSearchTermChange:n}=T();return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(S,{handleSubmit:a,searchTerm:t,handleSearchTermChange:n}),s?e.jsx(x,{}):e.jsx(b,{articles:r}),e.jsx(j,{})]})};export{$ as default};
